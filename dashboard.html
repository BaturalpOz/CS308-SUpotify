<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://bootswatch.com/4/lux/bootstrap.min.css">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js' crossorigin='anonymous'></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Dashboard</title>
    <style>
        body {
            background-color: #ffffff;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;

            /* Fixed background for better scrolling experience */
            padding-top: 100px; /* Adjust this value based on the height of your fixed top navbar */
            padding-bottom: 50px; /* Adjust this value based on the height of your fixed bottom navbar */
        }

        #sidebar {
            width: 200px;
            position: fixed;
            right: 0;
            /* Change right to 0 to keep the sidebar open */
            height: calc(84% - 10px);
            background-color: #EBEDF1;
            /* Change sidebar background color to match your style */
            color: #000000;
            /* Text color */
            padding-top: 10px;
        }

        #sidebar a {
            padding: 30px;
            width: 150px;
            height: 30px;
            background-color: #5cbda7;
            margin: 0 auto;
            margin-bottom: 10px;
            font-size: 20px;
            color: #ffffff;
            display: flex;
            justify-content: center;
            /* Center the text content horizontally */
            align-items: center;
            /* Center the text content vertically */
            border: 1px solid #000;
            border-radius: 25px;
            border-color: darkgray;
            box-shadow: 3px 3px 5px #888888;
            font-weight: bold;
        }

        #content {
            margin-right: 250px;
            /* Ensure content doesn't overlap with the sidebar */
            padding-bottom: 50px;
            
        }

        .navbar {
            background-color: #0F4C8F;
            /* Dark purple background */
        }

        .navbar-brand,
        .navbar-nav .nav-link {
            color: #ffffff;
            /* White text color for navigation links */
            font-size: 30px;
        }

        .navbar-toggler-icon {
            background-color: #ffffff;
            /* White color for the toggler icon */
        }

        .custom-text {
            font-size: 16px;
            color: #555;
            font-weight: bold;
            margin-top: 10px;
            text-align: center;
        }

        .custom-text a {
            text-decoration: none;
            /* Remove underline from links */
            color: rgb(0, 0, 0);
            /* Change link color */
            font-weight: bold;
            /* Make the link text bold */
        }

        .navbar-bottom {
            background-color: #0F4C8F;
            position: fixed;
            bottom: -20px;
            width: 100%;
            z-index: 999;
        }

        .navbar-bottom .navbar-brand { 
            color: #ffffff;
            font-size: 20px;
        }

        .navbar-bottom-toggler-icon {
            background-color: #ffffff;
        }

        .sidebar-divider {
            border: 5px solid #5cbda7;
            /* Adjust the thickness and color as needed */
            margin: 22px 0;
            /* Adjust the margin to position the divider */
        }

        #logout-link {
            position: absolute;
            bottom: 50px;
            left: 10px;
            right: 10px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #5cbda7;
            padding: 15px;
            font-size: 20px;
            color: #ffffff;
            border-radius: 25px;
            box-shadow: 3px 3px 5px #888888;
            text-decoration: none;
        }

        #logout-link i {
            font-size: 20px;
            margin-right: 10px;
        }

        .albums-container {
            display: flex;
            justify-content: space-between;
        }

        .album {
            text-align: center;
        }

        .album-image {
            border-radius: 50%;
            overflow: hidden;
            width: 100px;
            /* Adjust the size of the circle */
            height: 100px;
            /* Adjust the size of the circle */
            margin: 0 auto 10px;
            /* Center the circle and add spacing below */
        }

        .album-image img {
            width: 100%;
            height: auto;
        }

        .album-name {
            font-weight: bold;
            font-size: 16px;
        }

        /* Add these styles for the search container */
        .search-container {
            display: flex;
            align-items: center;
            margin-left: auto;
            /* Push the search bar and button to the right */
        }

        /* Add these styles for the search input */
        .search-container input[type="text"] {
            margin-right: 10px;
            /* Add margin to the right of the input */
            border-radius: 10px;
        }

        /* Add these styles for the search button */
        .search-container button {
            border-radius: 10px;
        }

        .circular-container {
            width: 120px;
            height: 120px;
            overflow: hidden;
            border-radius: 50%;
            margin: 0 auto 10px;
        }

        .circular-element {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .circular-element img {
            width: 10%;
            height: auto;
            border-radius: 50%;
        }

        .album-list ul {
            display: flex;
            /* Ensure the list is displayed as a flex container */
            list-style: circle;

            padding: 0;
            /* Remove default list padding */
        }

        .album-list-item {
            flex: 0 0 auto;
            /* Ensure list items do not grow or shrink */
            margin-right: 200px;
            /* Add spacing between list items */
        }


        .artist-container {
            display: flex;
            justify-content: space-between;
        }

        .artist {
            text-align: center;
        }

        .artist-image {
            border-radius: 50%;
            overflow: hidden;
            width: 100px;
            /* Adjust the size of the circle */
            height: 100px;
            /* Adjust the size of the circle */
            margin: 0 auto 10px;
            /* Center the circle and add spacing below */
        }

        .artist-image img {
            width: 100%;
            height: auto;
        }

        .artist-name {
            font-weight: bold;
            font-size: 16px;
        }

        .artist-list ul {
            display: flex;
            /* Ensure the list is displayed as a flex container */
            list-style: none;
            /* Remove default list styling */
            padding: 0;
            /* Remove default list padding */
        }

        .artist-list-item {
            flex: 0 0 auto;
            /* Ensure list items do not grow or shrink */
            margin-right: 200px;
            /* Add spacing between list items */
        }

    </style>

    <script>
        window.onload = function () {
            // Fetch and display albums when the page loads
            fetch('http://127.0.0.1:5001/album/all')
                .then(response => response.json())
                .then(data => {
                    const albumContainer = document.querySelector('.album-list ul');
                    albumContainer.innerHTML = ''; // Clear existing content

                    // Fetch details for the first 3 albums
                    const firstThreeAlbumIds = data.album_ids.slice(0, 3);

                    // Use Promise.all to wait for all fetch requests to complete
                    Promise.all(firstThreeAlbumIds.map(albumId =>
                        fetch(`http://127.0.0.1:5001/album/${albumId}`)
                            .then(response => response.json())
                    ))
                        .then(albumsData => {
                            albumsData.forEach(albumData => {
                                const albumElement = createAlbumElement(albumData.album);
                                albumContainer.appendChild(albumElement);
                            });
                        })
                        .catch(error => console.error('Error fetching albums:', error));
                })
                .catch(error => console.error('Error fetching album IDs:', error));

            function createAlbumElement(album) {
                const albumListItem = document.createElement('li');
                albumListItem.classList.add('list-group-item', 'album-list-item', 'album');

                // Create a link for each album
                const albumLink = document.createElement('a');
                albumLink.href = `view_specific_album.html?albumId=${album.Id}`;
                
                // Create a circular container
                const circularContainer = document.createElement('div');
                circularContainer.classList.add('circular-container');
                
                // Create an image element for the album cover
                const albumImage = document.createElement('img');
                albumImage.src = album.Image;

                // Create a circular element for the album details
                const circularElement = document.createElement('div');
                circularElement.classList.add('circular-element');

                // Append the image to the circular element
                circularElement.appendChild(albumImage);
                
                // Create a text element for the album name
                const albumName = document.createElement('div');
                albumName.classList.add('album-name');
                albumName.textContent = album.Name;

                // Append the circular element to the link
                albumLink.appendChild(circularElement);
                
                // Append the link to the list item
                albumListItem.appendChild(albumLink);
                albumListItem.appendChild(albumName);

                return albumListItem;
            }

            // Fetch and display artists when the page loads
            fetch('http://127.0.0.1:5001/artist/all')
                .then(response => response.json())
                .then(data => {
                    const artistList = document.querySelector('.artist-list ul');
                    artistList.innerHTML = ''; // Clear existing list items

                    // Fetch details for the first 3 artists
                    const firstThreeArtistIds = data.artist_ids.slice(0, 3);

                    // Use Promise.all to wait for all fetch requests to complete
                    Promise.all(firstThreeArtistIds.map(artistId =>
                        fetch(`http://127.0.0.1:5001/artist/${artistId}`)
                            .then(response => response.json())
                    ))
                        .then(artistsData => {
                            artistsData.forEach(artistData => {
                                const artistElement = createArtistElement(artistData.artist);
                                artistList.appendChild(artistElement);
                            });
                        })
                        .catch(error => console.error('Error fetching artists:', error));
                })
                .catch(error => console.error('Error fetching artist IDs:', error));

            function createArtistElement(artist) {
                const artistListItem = document.createElement('li');
                artistListItem.classList.add('list-group-item', 'artist-list-item', 'artist');

                // Create a link for each artist
                const artistLink = document.createElement('a');
                artistLink.href = `view_specific_artist.html?artistId=${artist.Id}`;

                // Create an image element for the artist
                const artistImageContainer = document.createElement('div');
                artistImageContainer.classList.add('artist-image');
                const artistImage = document.createElement('img');
                artistImage.src = artist.Image; // Replace with the actual property from your API
                artistImageContainer.appendChild(artistImage);

                // Create a text element for the artist name
                const artistName = document.createElement('div');
                artistName.classList.add('artist-name');
                artistName.textContent = artist.Name;

                // Append the image to the link
                artistLink.appendChild(artistImageContainer);

                // Append the link and name to the list item
                artistListItem.appendChild(artistLink);
                artistListItem.appendChild(artistName);

                return artistListItem;
            }
        };
    </script>

    <script>
        function search() {
            // Get the value from the input field
            const searchQuery = document.getElementById('searchInput').value;

            // Redirect to the search_page.html with the search query as a parameter
            window.location.href = `search_page.html?q=${searchQuery}`;
        }
    </script>

    


</head>

<body>
    <!-- Sidebar -->
    <div id="sidebar">

        <a href="profile.html" style="text-decoration: none; color: inherit;">
            <div style="display: flex; align-items: center; padding: 10px;">
                <i class="fas fa-user" style="font-size: 22px; margin-right: 15px;"></i>
                Profile
            </div>
        </a>


        

        <hr class="sidebar-divider">

        <a href="friends.html" class="list-group-item list-group-item-action" style="margin-top: 100px;">Friends</a>
        <a href="songs.html" class="list-group-item list-group-item-action" style="margin-top: 40px;">Songs</a>
        <a href="list_all_songs_saved.html" class="list-group-item list-group-item-action" style="margin-top: 30px;">Favorites</a>
        <a href="category_page.html" class="list-group-item list-group-item-action" style="margin-top: 30px;">Discover</a>

        <!-- Logout link -->
        <a href="login_page.html" id="logout-link" style="bottom: 70px;">
            <i class="fas fa-sign-out-alt"></i>
            Logout
        </a>

        <!-- Settings section with icon and text -->
        <a href="settings.html" style="position: absolute; bottom: -10px; left: 10px; right: 10px; text-align: center; display: flex; align-items: center; justify-content: center; text-decoration: none; color: inherit;">
            <i class="fas fa-cog" style="font-size: 20px; margin-right: 10px;"></i>
            <span style="font-size: 24px; vertical-align: middle;">Settings</span>
        </a>
    </div>

    <!-- Content -->
    <!-- Bottom Navbar -->
    <nav class="navbar navbar-bottom">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">© 2023 SUpotify</a>
        </div>
    </nav>

    <!-- Top Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <!-- Navbar line-->
        <div class="container-fluid">
            <!-- SUpotify Brand with logo -->
            <div class="d-flex align-items-center">
                <img src="logo.jpeg" alt="Logo" style="height: 50px; margin-right: 10px;">
                <a class="navbar-brand" href="#">
                    SUpotify
                </a>
            </div>

            <!-- Move the search bar and button to the right -->
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search..." class="form-control">
                <button class="btn btn-success" style="margin-left: 10px;" onclick="search()">Search</button>
            </div>
        </div>
    </nav>

    <!-- Albums display -->
    <div class="album-list">
        <h2><a href="view_albums.html">Trending Albums</a></h2>
        <ul class="list-group">
            <!-- Albums will be dynamically added here by the JavaScript code -->
        </ul>
    </div>

    <!-- Artist List -->
    <div class="artist-list">
        <h2><a href="view_artists.html">Trending Artists</a></h2>
        <ul class="list-group">
            <!-- Artists will be dynamically added here by the JavaScript code -->
        </ul>
    </div>

</body>

</html>
