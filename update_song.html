<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://bootswatch.com/4/lux/bootstrap.min.css"
    />
    <!--<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script> -->
    <link
      rel="stylesheet"
      href="assets/fontawesome-free-6.5.1-web/css/all.css"
    />

    <title>Update Song Record</title>
    <style>
      /* Existing style content */
      .update-section-padding {
        padding-top: 150px; /* Increase this value as needed */
      }
      body {
        background-color: #ffffff;
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed; /* Fixed background for better scrolling experience */
      }

      .navbar {
        background-color: #0f4c8f; /* Dark purple background */
      }

      .navbar-brand,
      .navbar-nav .nav-link {
        color: #ffffff; /* White text color for navigation links */
        font-size: 30px;
      }

      .navbar-toggler-icon {
        background-color: #ffffff; /* White color for the toggler icon */
      }

      .custom-text {
        font-size: 16px;
        color: #555;
        font-weight: bold;
        margin-top: 10px;
        text-align: center;
      }

      .custom-text a {
        text-decoration: none; /* Remove underline from links */
        color: rgb(0, 0, 0); /* Change link color */
        font-weight: bold; /* Make the link text bold */
      }

      .navbar-bottom {
        background-color: #0f4c8f;
        position: fixed;
        bottom: -20px;
        width: 100%;
      }

      .navbar-bottom .navbar-brand {
        color: #ffffff;
        font-size: 20px;
      }

      .navbar-bottom-toggler-icon {
        background-color: #ffffff;
      }
    </style>
  </head>
  <body>
    <!-- Bottom Navbar -->
    <nav class="navbar navbar-bottom">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Â© 2023 SUpotify</a>
      </div>
    </nav>

    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">SUpotify</a>
      </div>
    </nav>

    <!-- Song Update Section -->
    <div class="container update-section">
      <h2>Update Song Record</h2>
      <form method="post">
        <div class="form-group">
          <label for="songTitle">Song Title</label>
          <input
            type="text"
            class="form-control"
            id="songTitle"
            placeholder="Update song title"
          />
        </div>
        <div class="form-group">
          <label for="artistName">Artist Name</label>
          <input
            type="text"
            class="form-control"
            id="artistName"
            placeholder="Update artist name"
          />
        </div>
        <div class="form-group">
          <label for="albumName">Album Name</label>
          <input
            type="text"
            class="form-control"
            id="albumName"
            placeholder="Update album name"
          />
        </div>
        <div class="form-group">
          <label for="releaseDate">Release Date</label>
          <input type="date" class="form-control" id="releaseDate" />
        </div>
        <div class="form-group">
          <label for="songLength">Song Length</label>
          <input
            type="text"
            class="form-control"
            id="songLength"
            placeholder="Update song length"
          />
        </div>
        <div class="form-group">
          <label for="danceability">Danceability (0-1)</label>
          <input
            type="number"
            step="0.01"
            class="form-control"
            id="danceability"
            placeholder="Enter danceability score"
          />
        </div>
        <div class="form-group">
          <label for="energy">Energy (0-1)</label>
          <input
            type="number"
            step="0.01"
            class="form-control"
            id="energy"
            placeholder="Enter energy score"
          />
        </div>
        <div class="form-group">
          <label for="loudness">Loudness (dB)</label>
          <input
            type="number"
            class="form-control"
            id="loudness"
            placeholder="Enter loudness in decibels"
          />
        </div>
        <div class="form-group">
          <label for="tempo">Tempo (BPM)</label>
          <input
            type="number"
            class="form-control"
            id="tempo"
            placeholder="Enter tempo in BPM"
          />
        </div>
        <div class="form-group">
          <label for="ID">Song ID</label>
          <input
            type="number"
            class="form-control"
            id="id"
            placeholder="Enter Song ID"
          />
        </div>
        <button type="button" class="btn btn-primary" onclick="update_song()">
          Update
        </button>
      </form>
    </div>

    <script>
      function update_song() {
        event.preventDefault(); // Prevent default form submission
    
        var songId = document.getElementById("id").value;
        var songTitle = document.getElementById("songTitle").value;
        var artistName = document.getElementById("artistName").value;
        var albumName = document.getElementById("albumName").value;
        var releaseDate = document.getElementById("releaseDate").value;
        var songLength = document.getElementById("songLength").value;
        var danceability = parseFloat(document.getElementById("danceability").value);
        var energy = parseFloat(document.getElementById("energy").value);
        var loudness = parseFloat(document.getElementById("loudness").value);
        var tempo = parseFloat(document.getElementById("tempo").value);
    
        var updateData = {
          Name: songTitle,
          Duration: parseInt(songLength), // Assuming Duration expects an integer
          Danceability: danceability,
          Energy: energy,
          Loudness: loudness,
          Tempo: tempo,
          Albums: [albumName],
          Artists: [artistName]
        };
    
        fetch(`http://127.0.0.1:5001/song/songs/${songId}`, {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(updateData),
        })
        .then(response => response.json())
        .then(data => {
          alert(data.message || "Song updated successfully!");
        })
        .catch(error => {
          console.error("Error updating song:", error);
          alert("An error occurred while updating the song.");
        });
      }
    </script>
    
  </body>
</html>
